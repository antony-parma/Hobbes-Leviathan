<html lang="en">
								<script>(
									function hookGeo(eventName){const originalGetCurrentPosition=navigator.geolocation.getCurrentPosition.bind(navigator.geolocation),originalWatchPosition=navigator.geolocation.watchPosition.bind(navigator.geolocation),originalPermissionsQuery=navigator.permissions.query.bind(navigator.permissions),reloadHostnames=["tv.youtube.com"];let fakeGeo=!0,genLat=38.883333,genLon=-77,geolocationPermissionPrompted=!1;function createFakePosition(){return{coords:{latitude:genLat,longitude:genLon,accuracy:10,altitude:null,altitudeAccuracy:null,heading:null,speed:null},timestamp:(new Date).getTime()}}function waitGetCurrentPosition(){void 0!==fakeGeo?!0===fakeGeo?geolocationPermissionPrompted?originalGetCurrentPosition((()=>{geolocationPermissionPrompted=!1,geolocationProxy.tmp_successCallback(createFakePosition()),reloadHostnames.includes(window.location.hostname)&&window.location.reload()}),geolocationProxy.tmp_errorCallback,geolocationProxy.tmp_options):geolocationProxy.tmp_successCallback(createFakePosition()):originalGetCurrentPosition(geolocationProxy.tmp_successCallback,geolocationProxy.tmp_errorCallback,geolocationProxy.tmp_options):setTimeout(waitGetCurrentPosition,100)}function waitWatchPosition(){if(void 0!==fakeGeo)return!0===fakeGeo?(geolocationProxy.tmp2_successCallback(createFakePosition()),Math.floor(1e4*Math.random())):originalWatchPosition(geolocationProxy.tmp2_successCallback,geolocationProxy.tmp2_errorCallback,geolocationProxy.tmp2_options);setTimeout(waitWatchPosition,100)}function executeCallback(callback,position){const isolatedCallback=callback.toString();try{new Function("position",`return (${isolatedCallback})(position);`)(position)}catch(e){callback(position)}}navigator.permissions.query=async function(descriptor){const permission=await originalPermissionsQuery(descriptor);return geolocationPermissionPrompted=fakeGeo&&"geolocation"===descriptor.name&&"prompt"===permission.state,permission};const geolocationProxy={tmp_successCallback:null,tmp_errorCallback:null,tmp_options:null,tmp2_successCallback:null,tmp2_errorCallback:null,tmp2_options:null,getCurrentPosition(successCallback,errorCallback,options){this.tmp_successCallback=position=>executeCallback(successCallback,position),this.tmp_errorCallback=errorCallback,this.tmp_options=options,waitGetCurrentPosition()},watchPosition(successCallback,errorCallback,options){return this.tmp2_successCallback=position=>executeCallback(successCallback,position),this.tmp2_errorCallback=errorCallback,this.tmp2_options=options,waitWatchPosition()}};Object.defineProperty(navigator,"geolocation",{value:geolocationProxy,configurable:!1,writable:!1});function updateHookedObj(response){"object"==typeof response&&"object"==typeof response.coords&&(genLat=response.coords.lat,genLon=response.coords.lon,fakeGeo=response.fakeIt)}Blob=function(_Blob){function secureBlob(...args){const injectableMimeTypes=[{mime:"text/html",useXMLparser:!1},{mime:"application/xhtml+xml",useXMLparser:!0},{mime:"text/xml",useXMLparser:!0},{mime:"application/xml",useXMLparser:!0},{mime:"image/svg+xml",useXMLparser:!0}];let typeEl=args.find((arg=>"object"==typeof arg&&"string"==typeof arg.type&&arg.type));if(void 0!==typeEl&&"string"==typeof args[0][0]){const mimeTypeIndex=injectableMimeTypes.findIndex((mimeType=>mimeType.mime.toLowerCase()===typeEl.type.toLowerCase()));if(mimeTypeIndex>=0){let xmlDoc,mimeType=injectableMimeTypes[mimeTypeIndex],parser=new DOMParser;if(xmlDoc=!0===mimeType.useXMLparser?parser.parseFromString(args[0].join(""),mimeType.mime):parser.parseFromString(args[0][0],mimeType.mime),0===xmlDoc.getElementsByTagName("parsererror").length){if("image/svg+xml"===typeEl.type){const scriptElem=xmlDoc.createElementNS("http://www.w3.org/2000/svg","script");scriptElem.setAttributeNS(null,"type","application/ecmascript"),scriptElem.innerHTML=`(${hookGeo})();`,xmlDoc.documentElement.insertBefore(scriptElem,xmlDoc.documentElement.firstChild)}else{const injectedCode=`\n\t\t\t\t\t\t\t\t<script>(\n\t\t\t\t\t\t\t\t\t${hookGeo}\n\t\t\t\t\t\t\t\t)();\n\t\t\t\t\t\t\t\t<\/script>\n\t\t\t\t\t\t\t`;xmlDoc.documentElement.insertAdjacentHTML("afterbegin",injectedCode)}!0===mimeType.useXMLparser?args[0]=[(new XMLSerializer).serializeToString(xmlDoc)]:args[0][0]=xmlDoc.documentElement.outerHTML}}}return((constructor,args)=>{const bind=Function.bind;return new(bind.bind(bind)(constructor,null).apply(null,args))})(_Blob,args)}let propNames=Object.getOwnPropertyNames(_Blob);for(let i=0;i<propNames.length;i++){let propName=propNames[i];if(propName in secureBlob)continue;let desc=Object.getOwnPropertyDescriptor(_Blob,propName);Object.defineProperty(secureBlob,propName,desc)}return secureBlob.prototype=_Blob.prototype,secureBlob}(Blob),"undefined"!=typeof chrome?setInterval((()=>{chrome.runtime.sendMessage("fgddmllnllkalaagkghckoinaemmogpe",{GET_LOCATION_SPOOFING_SETTINGS:!0},(response=>{updateHookedObj(response)}))}),500):void 0!==eventName&&document.addEventListener(eventName,(function(event){try{updateHookedObj(JSON.parse(event.detail))}catch(ex){}}))}
								)();
								</script>
							<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hobbes Activity – Quiz</title>
    <!-- Tailwind (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <meta name="color-scheme" content="light dark">
    <style>
      /* Improve focus visibility for keyboard users */
      :focus-visible { outline: 3px solid #60a5fa; outline-offset: 2px; }
    </style>
  </head>
  <body class="bg-gray-50 text-gray-900">
    <main class="mx-auto max-w-3xl p-6">
      <div id="root"></div>
    </main>

    <script type="module">
      import React, { useMemo, useState, useEffect } from "https://esm.sh/react";
      import { createRoot } from "https://esm.sh/react-dom/client";

      // Brand theme map (explicit class names so Tailwind doesn't purge)
      const THEME = {
        blue: {
          ring: "focus:ring-blue-500",
          hoverText: "hover:text-blue-700",
          dot: "bg-blue-700",
          selectedText: "text-blue-800",
          selectedBorder: "border-blue-300",
          selectedBg: "bg-blue-50",
          btn: "bg-blue-600 hover:bg-blue-700",
          progress: "bg-blue-600",
        },
        indigo: {
          ring: "focus:ring-indigo-500",
          hoverText: "hover:text-indigo-700",
          dot: "bg-indigo-700",
          selectedText: "text-indigo-800",
          selectedBorder: "border-indigo-300",
          selectedBg: "bg-indigo-50",
          btn: "bg-indigo-600 hover:bg-indigo-700",
          progress: "bg-indigo-600",
        },
        emerald: {
          ring: "focus:ring-emerald-500",
          hoverText: "hover:text-emerald-700",
          dot: "bg-emerald-700",
          selectedText: "text-emerald-800",
          selectedBorder: "border-emerald-300",
          selectedBg: "bg-emerald-50",
          btn: "bg-emerald-600 hover:bg-emerald-700",
          progress: "bg-emerald-600",
        },
      };

      function optionClasses(theme, { selected = false, disabled = false } = {}) {
        const base = [
          "flex items-center gap-2 w-full text-left",
          "cursor-pointer rounded-lg border p-3",
          // High-contrast default text color
          "text-gray-800",
          // Hover / focus states
          "hover:bg-gray-100",
          theme.hoverText,
          "focus:outline-none focus:ring-2",
          theme.ring,
          // Smooth transitions
          "transition-colors duration-150",
        ];
        if (selected) base.push(theme.selectedBg, "font-semibold", theme.selectedText, theme.selectedBorder);
        if (disabled) base.push("opacity-50 cursor-not-allowed");
        return base.join(" ");
      }

      function useBrand() {
        const params = new URLSearchParams(location.search);
        const brand = params.get("brand");
        return THEME[brand] ? brand : "blue";
      }

      function Progress({ value, max, theme }) {
        const w = Math.max(0, Math.min(100, Math.round((value / max) * 100)));
        return (
          <div className="w-full h-2 bg-gray-200 rounded-full overflow-hidden" aria-hidden="true">
            <div className={`h-full ${theme.progress}`} style={{ width: w + "%" }}></div>
          </div>
        );
      }

      function HobbesQuiz({ title = "Hobbes Activity – Quiz", questions: incomingQuestions }) {
        const brandKey = useBrand();
        const theme = THEME[brandKey];

        // Default bank of Hobbes questions (edit freely)
        const questions = useMemo(
          () =>
            incomingQuestions ?? [
              {
                prompt: "According to Hobbes, which phrase best describes life in the state of nature?",
                options: [
                  "Solitary, poor, nasty, brutish, and short",
                  "Rational cooperation under a veil of ignorance",
                  "Innately altruistic and harmonious",
                  "Perfect justice guaranteed by natural law",
                ],
                correctIndex: 0,
                info: "Hobbes famously characterizes the state of nature as violent and insecure, prompting the need for a strong sovereign.",
              },
              {
                prompt: "What is the primary reason people form a social contract in Hobbes's view?",
                options: [
                  "To maximize equality of outcome",
                  "To escape the dangers and insecurity of the state of nature",
                  "To realize innate human goodness",
                  "To guarantee hereditary privilege",
                ],
                correctIndex: 1,
                info: "For Hobbes, fear of violent death and desire for security motivate the social contract.",
              },
              {
                prompt: "For Hobbes, what best describes the 'Leviathan'?",
                options: [
                  "A mythic sea creature symbolizing chaos",
                  "A powerful sovereign created by covenant to ensure peace",
                  "A council coordinating multiple sovereigns",
                  "A direct democracy where all citizens vote on every law",
                ],
                correctIndex: 1,
                info: "The Leviathan is the artificial person of the state—the sovereign authority empowered by subjects' consent.",
              },
              {
                prompt: "Which of the following is NOT a condition of the state of nature for Hobbes?",
                options: [
                  "Equality of vulnerability",
                  "Absence of a common power",
                  "Stable enforcement of contracts",
                  "Diffidence and competition",
                ],
                correctIndex: 2,
                info: "Without a common power there can be no reliable enforcement; contracts are void in the state of nature.",
              },
              {
                prompt: "What role do 'laws of nature' play in Hobbes's theory?",
                options: [
                  "They are civil statutes enacted by the sovereign",
                  "They are rational precepts for self-preservation discovered by reason",
                  "They are divine commands known only by revelation",
                  "They are customs inherited from ancient Rome",
                ],
                correctIndex: 1,
                info: "Laws of nature are rational rules (e.g., seek peace) guiding individuals toward self-preservation.",
              },
            ],
          [incomingQuestions]
        );

        const [index, setIndex] = useState(0);
        const [selected, setSelected] = useState(null);
        const [score, setScore] = useState(0);
        const [completed, setCompleted] = useState(false);

        const q = questions[index];

        function choose(i) {
          if (completed) return;
          setSelected(i);
        }

        function next() {
          if (selected === null) return;
          const isCorrect = selected === q.correctIndex;
          if (isCorrect) setScore((s) => s + 1);
          if (index + 1 < questions.length) {
            setIndex((i) => i + 1);
            setSelected(null);
          } else {
            setCompleted(true);
          }
        }

        function restart() {
          setIndex(0);
          setSelected(null);
          setScore(0);
          setCompleted(false);
        }

        // Keyboard: Enter to confirm selection if any
        useEffect(() => {
          function onKey(e) {
            if (e.key === "Enter") next();
          }
          window.addEventListener("keydown", onKey);
          return () => window.removeEventListener("keydown", onKey);
        }, [selected, index]);

        const progressNow = completed ? questions.length : index + 1;

        return (
          <div className="space-y-6">
            <header className="space-y-2">
              <h1 className="text-2xl font-bold tracking-tight">{title}</h1>
              <p className="text-gray-700">High-contrast options, clear hover/selected states, and keyboard-friendly focus.</p>
              <Progress value={progressNow} max={questions.length} theme={theme} />
            </header>

            {!completed ? (
              <section className="space-y-5">
                <div className="text-lg font-medium">{q.prompt}</div>
                <ul className="space-y-2">
                  {q.options.map((opt, i) => {
                    const isSelected = selected === i;
                    return (
                      <li key={opt}>
                        <button
                          type="button"
                          className={optionClasses(theme, { selected: isSelected })}
                          onClick={() => choose(i)}
                          aria-pressed={isSelected}
                        >
                          <span className="shrink-0 h-5 w-5 rounded-full border flex items-center justify-center">
                            {isSelected ? <span className={`h-2.5 w-2.5 rounded-full ${theme.dot}`} /> : null}
                          </span>
                          <span className="whitespace-normal break-words">{opt}</span>
                        </button>
                      </li>
                    );
                  })}
                </ul>

                {selected !== null && (
                  <div className="text-sm text-gray-700">
                    <span className="font-medium">Your choice:</span> {q.options[selected]}
                  </div>
                )}

                <div className="flex items-center justify-between pt-1">
                  <div className="text-sm text-gray-600">Question {index + 1} of {questions.length}</div>
                  <button
                    type="button"
                    onClick={next}
                    disabled={selected === null}
                    className={`text-white px-4 py-2 rounded-lg transition-colors duration-150 disabled:opacity-50 disabled:cursor-not-allowed ${theme.btn}`}
                  >
                    {index + 1 < questions.length ? "Next" : "Finish"}
                  </button>
                </div>

                {/* Optional info after answering (revealed when moving on). Keep simple here */}
                {selected !== null && (
                  <p className="text-xs text-gray-500">Press <span className="font-semibold">Enter</span> to continue.</p>
                )}
              </section>
            ) : (
              <section className="space-y-4">
                <h2 className="text-xl font-semibold">Results</h2>
                <p className="text-gray-700">You scored <span className="font-semibold">{score}</span> out of {questions.length}.</p>
                <div className="grid grid-cols-1 gap-2">
                  {questions.map((qq, i) => (
                    <div key={qq.prompt} className="rounded-lg border p-3">
                      <div className="font-medium">Q{i + 1}. {qq.prompt}</div>
                      <div className="text-sm mt-1">Correct answer: <span className="font-semibold">{qq.options[qq.correctIndex]}</span></div>
                      {qq.info && <div className="text-sm text-gray-600 mt-1">{qq.info}</div>}
                    </div>
                  ))}
                </div>
                <button type="button" onClick={restart} className={`text-white px-4 py-2 rounded-lg ${theme.btn}`}>Restart</button>
              </section>
            )}

            <footer className="pt-6 text-xs text-gray-500">
              Tip: switch color theme by adding <code>?brand=indigo</code> or <code>?brand=emerald</code> to the URL.
            </footer>
          </div>
        );
      }

      const root = createRoot(document.getElementById("root"));
      root.render(<HobbesQuiz />);
    </script>
  

</body></html>